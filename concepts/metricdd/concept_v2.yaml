id: "metricdd_v2"
name: "MetricDD (Metric Driven Development)"
version: 2

definition:
  summary: >
    事業目標に直結する指標を設計し、計測・実験・意思決定をその指標で駆動させる開発手法。
    指標の定義と計測方法を仕様として扱い、変更管理まで含めて運用する。
  details: |
    MetricDDは北極星指標とドライバー指標を明確にし、仮説ごとにどの指標をどの期間でどれだけ
    動かすかを合意する。計測ポイントは実装前にイベントスキーマとして定義し、デプロイ後すぐ
    にダッシュボードで検証できる状態を作る。指標定義はバージョン管理し、変更時には算出式・
    データソース・サンプリングルールを更新する。データ品質の監視やA/Bテストの停止基準を
    設け、指標に基づく意思決定の透明性を保つ。

usage_context:
  description: >
    プロダクトの成長段階で施策の優先度を数字で判断したいとき、複数チームが同じ指標体系で
    開発する必要がある組織、広告/サブスクなどLTVを継続改善したい場面で有効。
  examples:
    - "新機能をA/Bテストで継続率に与える影響を測定したいSaaS"
    - "広告出稿とプロダクト改善を同じ指標セットで評価したいグロース組織"
    - "計測漏れで意思決定が遅れている現場で、スキーマとダッシュボードを標準化したい場合"

decision_axes:
  - name: "指標と目標の連動性"
    description: "指標がKGI/KPIにトレースでき、先行・遅行指標の役割が明確か"
  - name: "計測設計の実装度"
    description: "イベントスキーマ・データフロー・ダッシュボードがリリースと同時に用意されるか"
  - name: "検証と意思決定のサイクル"
    description: "実験の停止基準、意思決定のタイムライン、責任者が明確か"
  - name: "データ品質管理"
    description: "欠測・異常検知・バックフィルなど計測品質を守る運用があるか"
  - name: "合意と変更管理"
    description: "指標定義の変更が合意フローを経て記録され、混乱を防げているか"

primary_roles:
  - "product_manager"
  - "data_analyst"
  - "data_engineer"
  - "growth_pm"
  - "software_engineer"
  - "designer"

anti_patterns:
  - name: "数字だけの追走"
    description: "指標がユーザー価値と結びつかず、短期的な数字のためにUXを損ねる"
  - name: "計測スパゲッティ"
    description: "イベント命名やスキーマが乱立し、分析環境が壊れる"
  - name: "後追いA/Bテスト"
    description: "計測準備ができておらず、実験結果の解釈ができないまま施策を続行する"

evaluation:
  qualitative:
    guidelines: |
      - 指標定義が仕様化され、データソース・算出式・例外処理が共有されているか
      - 実験の振り返りが定例で、廃止/継続/改善の判断が指標に基づいて行われているか
      - 計測異常を検知し、影響範囲を周知して迅速に修正できる体制があるか
  quantitative:
    metrics:
      - name: "計測カバレッジ"
        description: "設計したイベントがデプロイ時点で何%計測できているか"
      - name: "実験サイクル時間"
        description: "仮説立案から意思決定までのリードタイム"
      - name: "指標定義変更リードタイム"
        description: "指標定義の変更申請から運用反映までの平均時間"
      - name: "データ品質アラート件数"
        description: "欠測・異常が検知される頻度と修正完了までの時間"

examples:
  success_cases:
    - description: >
        イベントスキーマをコード管理し、リリース前に計測テストを自動実行。北極星指標への
        貢献度をA/Bテストで継続評価し、低効果施策を早期に廃止して開発効率を向上させた。
  failure_cases:
    - description: >
        KPIを数値目標だけ掲げ、算出式やデータソースが共有されずチーム間で数字が食い違い。
        計測漏れも多く、意思決定が遅延した。

relations:
  synergies:
    - "docdd"
    - "tdd"
    - "growth_hacking"
    - "opsdd"
  conflicts:
    - "feature_only_driven"
    - "vanity_metrics_focus"
  notes: >
    計測設計はDocDDの要件に含め、テスト(含むデータ品質テスト)をTDDと組み合わせると失敗を
    減らせる。指標のバージョンをデータカタログに記録すると混乱しにくい。
