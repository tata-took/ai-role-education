id: "docdd_v2"
name: "DocDD (Document Driven Development)"
version: 2

definition:
  summary: >
    仕様ドキュメントを開発の前提とし、合意されたドキュメントを中心に
    企画・開発・運用の意思決定を同期させる実務フレーム。
  details: |
    DocDD v2では、文書テンプレートとレビューフローをセットで提供し、
    1) 合意済みの目的・用語・境界条件をマスタードキュメントに集約し、
    2) 各チームがPull Requestや変更申請で必ず参照・更新する仕組みを組み込む。
    ドキュメントは「意思決定の履歴」「影響範囲」「更新責任者」を明示し、
    自動通知・変更履歴・リンク集でコードやテストと相互参照させる。これにより
    認識ズレ・属人化・証跡不足を同時に抑え、現場が安心して変更できる状態を保つ。

usage_context:
  description: >
    ステークホルダーが多層で、認可や監査対応が求められ、さらに遠隔・非同期で
    連携するプロジェクト。特に「決裁スピードを落とさずに証跡を残したい」状況で有効。
  examples:
    - "複数ベンダーが関与し、契約変更を頻繁に行う公共系システムの刷新案件"
    - "国内外の法規制に跨るSaaSで、プロダクト・リーガル・セキュリティが同時に判断する場面"
    - "プロジェクトがフルリモートで、レビュー会を文書コメント中心に回す必要があるケース"

decision_axes:
  - name: "共通語彙と境界条件の明示度"
    description: "役職や部門が違っても同じ言葉で議論できる辞書が存在し、更新ルールが守られているか"
  - name: "合意プロセスの可視化度"
    description: "誰がどの段階で承認したか、決裁チェーンとタイムラインが追跡できるか"
  - name: "変更連鎖のトレーサビリティ"
    description: "ドキュメント変更がコード・テスト・リリースノートにリンクされているか"
  - name: "運用儀式との統合度"
    description: "スプリントレビューやCABなど既存儀式にDocDDチェックが組み込まれているか"
  - name: "参照性・アクセス性"
    description: "検索・タグ・通知が整備され、現場が即座に最新版へアクセスできるか"

primary_roles:
  - "program_manager"
  - "product_owner"
  - "system_architect"
  - "qa_lead"
  - "compliance_officer"

anti_patterns:
  - name: "テンプレート崇拝"
    description: "形式だけ満たし実態の議論が口頭で進むため、文書が実情を反映しない"
  - name: "レビューボトルネック化"
    description: "承認者が特定個人に固定され、更新が週単位で滞る"
  - name: "影響リンク未整備"
    description: "ドキュメントがコードやチケットに紐づかず、更新後も開発現場に通知されない"
  - name: "証跡の無許可改変"
    description: "監査ログを残さずに履歴が書き換えられ、信頼性が損なわれる"

evaluation:
  qualitative:
    guidelines: |
      - プランニングやレビュー会で最新ドキュメントを画面共有しながら意思決定しているか
      - 変更履歴に目的・影響・承認者が記録され、後続チームが追跡できるか
      - DocDD遵守状況がレトロスペクティブや監査で定期的に点検されているか
  quantitative:
    metrics:
      - name: "仕様差戻し率"
        description: "承認済み仕様が実装後に差し戻された件数÷リリース数"
      - name: "ドキュメント同期遅延時間"
        description: "実装変更からドキュメント更新完了までの平均時間"
      - name: "リンクトレーサビリティ率"
        description: "ドキュメント変更に関連チケット/PRリンクが付与されている割合"
      - name: "承認サイクルタイム"
        description: "変更提案から承認完了までのリードタイム"

examples:
  success_cases:
    - description: >
        グローバルB2B SaaSでDocDDを導入し、各国法務・セキュリティが同じドキュメントでレビュー。
        リリースごとの仕様差戻し率が0.5件以下となり、監査指摘もゼロで通過した。
  failure_cases:
    - description: >
        開発初期だけ詳細な仕様書を作成したが、運用後は更新せず口頭決定が常態化。
        監査時に履歴が欠落し、全変更の遡及調査が必要になってプロジェクトが停止した。

relations:
  synergies:
    - "tdd"
    - "ddd"
    - "rfc_driven_development"
    - "compliance_driven_dev"
  conflicts:
    - "prototype_only_style"
    - "verbal_alignment_culture"
  notes: >
    RFCスタイルの議論と組み合わせると、技術面の意思決定も履歴化できる。プロトタイピング文化では
    スピード阻害と見なされがちなので、実験段階とドキュメント拘束段階を明確に切り替えるガードレールを設ける。
